[32mINFO    [0m pytest_operator.plugin:plugin.py:734 Connecting to existing model microk8s-localhost:test on unspecified cloud
[32mINFO    [0m juju.model:model.py:2097 Deploying ch:amd64/jammy/s3-integrator-24
[32mINFO    [0m juju.model:model.py:2097 Deploying ch:amd64/jammy/self-signed-certificates-155
[32mINFO    [0m juju.model:model.py:2097 Deploying local:jammy/postgresql-k8s-0
[33mWARNING [0m juju.model:model.py:1563 relate is deprecated and will be removed. Use integrate instead.
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [allocating] waiting: installing agent
  postgresql-k8s-aws/1 [allocating] waiting: installing agent
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [allocating] waiting: agent initialising
  postgresql-k8s-aws/1 [allocating] waiting: agent initialising
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] maintenance: installing charm software
  postgresql-k8s-aws/1 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] waiting: awaiting for cluster to start
  postgresql-k8s-aws/1 [executing] unknown: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] waiting: awaiting for primary endpoint to be ready
  postgresql-k8s-aws/1 [idle] unknown: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] waiting: awaiting for primary endpoint to be ready
  postgresql-k8s-aws/1 [idle] unknown: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: Primary
  postgresql-k8s-aws/1 [executing] unknown: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] active: Primary
  postgresql-k8s-aws/1 [idle] waiting: awaiting for cluster to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: Primary
  postgresql-k8s-aws/1 [idle] waiting: awaiting for cluster to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: 
  postgresql-k8s-aws/1 [idle] waiting: awaiting for cluster to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] maintenance: reconfiguring cluster
  postgresql-k8s-aws/1 [idle] waiting: awaiting for cluster to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: Primary
  postgresql-k8s-aws/1 [idle] waiting: awaiting for cluster to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: Primary
  postgresql-k8s-aws/1 [idle] active: 
[33mWARNING [0m juju.model:model.py:1563 relate is deprecated and will be removed. Use integrate instead.
[32mINFO    [0m integration.test_backups:test_backups.py:128 configuring S3 integrator for AWS
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] active: Primary
  postgresql-k8s-aws/1 [idle] active: 
  s3-integrator/0 [executing] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] maintenance: initialising stanza
  postgresql-k8s-aws/1 [executing] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] maintenance: initialising stanza
  postgresql-k8s-aws/1 [executing] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] maintenance: initialising stanza
  postgresql-k8s-aws/1 [executing] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] maintenance: initialising stanza
  postgresql-k8s-aws/1 [idle] active: 
  s3-integrator/0 [idle] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] maintenance: initialising stanza
  postgresql-k8s-aws/1 [idle] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: 
  postgresql-k8s-aws/1 [executing] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] maintenance: initialising stanza
  postgresql-k8s-aws/1 [executing] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: Primary
  postgresql-k8s-aws/1 [executing] active: 
[32mINFO    [0m integration.test_backups:test_backups.py:149 creating a table in the database
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] active: 
  self-signed-certificates/0 [idle] active: 
  postgresql-k8s-aws/0 [idle] active: Primary
  postgresql-k8s-aws/1 [idle] active: 
[32mINFO    [0m integration.test_backups:test_backups.py:160 creating a backup
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] active: 
  self-signed-certificates/0 [idle] active: 
  postgresql-k8s-aws/0 [executing] active: Primary
  postgresql-k8s-aws/1 [idle] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: Primary
[32mINFO    [0m integration.test_backups:test_backups.py:169 listing the available backups
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] active: 
  self-signed-certificates/0 [idle] active: 
  postgresql-k8s-aws/0 [idle] active: Primary
  postgresql-k8s-aws/1 [idle] active: 
[32mINFO    [0m integration.test_backups:test_backups.py:178 creating a second table in the database
[32mINFO    [0m integration.test_backups:test_backups.py:185 creating a backup
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] active: 
  self-signed-certificates/0 [idle] active: 
  postgresql-k8s-aws/0 [idle] active: Primary
  postgresql-k8s-aws/1 [idle] active: 
[32mINFO    [0m integration.test_backups:test_backups.py:196 listing the available backups
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] active: 
  self-signed-certificates/0 [idle] active: 
  postgresql-k8s-aws/0 [idle] active: Primary
  postgresql-k8s-aws/1 [idle] active: 
[32mINFO    [0m integration.test_backups:test_backups.py:205 creating a second table in the database
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws (waiting for exactly 1 units, current : 2)
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws (waiting for exactly 1 units, current : 2)
[32mINFO    [0m integration.test_backups:test_backups.py:219 restoring the backup
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] active: 
  self-signed-certificates/0 [idle] active: 
  postgresql-k8s-aws/0 [executing] maintenance: restoring backup
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] waiting: awaiting for member to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] waiting: awaiting for member to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] waiting: awaiting for member to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] waiting: awaiting for member to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] active: Primary
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: Primary
[32mINFO    [0m integration.test_backups:test_backups.py:234 checking that the backup was correctly restored
[32mINFO    [0m integration.test_backups:test_backups.py:268 restoring the backup
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] active: 
  self-signed-certificates/0 [idle] active: 
  postgresql-k8s-aws/0 [executing] maintenance: restoring backup
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] waiting: awaiting for member to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] waiting: awaiting for member to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] waiting: awaiting for member to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] waiting: awaiting for member to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [executing] active: Primary
[32mINFO    [0m integration.test_backups:test_backups.py:283 checking that the backup was correctly restored
[32mINFO    [0m integration.test_backups:test_backups.py:315 removing the TLS relation
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: Primary
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws (waiting for exactly 2 units, current : 1)
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: Primary
  postgresql-k8s-aws/1 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: Primary
  postgresql-k8s-aws/1 [executing] waiting: awaiting for cluster to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/0 [idle] active: Primary
  postgresql-k8s-aws/1 [executing] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/1 [executing] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/1 [executing] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-aws/1 [idle] active: 
[32mINFO    [0m integration.test_backups:test_backups.py:328 ensuring that the replication is working correctly
[32mINFO    [0m integration.test_backups:test_backups.py:350 performing a switchover from postgresql-k8s-aws/0 to postgresql-k8s-aws/1
[32mINFO    [0m integration.test_backups:test_backups.py:353 checking that the primary unit has changed
[32mINFO    [0m integration.test_backups:test_backups.py:362 listing the available backups to ensure that the stanza is working correctly
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] active: 
  self-signed-certificates/0 [idle] active: 
  postgresql-k8s-aws/0 [idle] active: 
  postgresql-k8s-aws/1 [idle] active: Primary
[32mINFO    [0m juju.model:model.py:2097 Deploying local:jammy/postgresql-k8s-1
[33mWARNING [0m juju.model:model.py:1563 relate is deprecated and will be removed. Use integrate instead.
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/0 [allocating] waiting: installing agent
  postgresql-k8s-gcp/1 [allocating] waiting: installing agent
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/0 [allocating] waiting: agent initialising
  postgresql-k8s-gcp/1 [allocating] waiting: agent initialising
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/0 [executing] waiting: awaiting for cluster to start
  postgresql-k8s-gcp/1 [executing] unknown: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/0 [executing] waiting: awaiting for primary endpoint to be ready
  postgresql-k8s-gcp/1 [idle] unknown: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/0 [idle] waiting: awaiting for primary endpoint to be ready
  postgresql-k8s-gcp/1 [idle] unknown: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/0 [idle] active: Primary
  postgresql-k8s-gcp/1 [executing] unknown: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/0 [idle] active: Primary
  postgresql-k8s-gcp/1 [executing] waiting: awaiting for cluster to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/0 [executing] active: Primary
  postgresql-k8s-gcp/1 [idle] waiting: awaiting for cluster to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/0 [idle] maintenance: reconfiguring cluster
  postgresql-k8s-gcp/1 [idle] waiting: awaiting for cluster to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/0 [idle] active: Primary
  postgresql-k8s-gcp/1 [idle] waiting: awaiting for member to start
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/0 [executing] active: Primary
[33mWARNING [0m juju.model:model.py:1563 relate is deprecated and will be removed. Use integrate instead.
[32mINFO    [0m integration.test_backups:test_backups.py:128 configuring S3 integrator for GCP
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/0 [executing] active: Primary
  postgresql-k8s-gcp/1 [idle] active: 
  s3-integrator/0 [executing] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/1 [executing] active: 
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/1 [executing] active: 
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql-k8s-gcp/1 [idle] active: 
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  s3-integrator/0 [idle] blocked: Missing parameters: ['access-key', 'secret-key']